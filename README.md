# ocr
Usage : `$python main.py data_number threshold`

1. 기울기 사용
 기울어지지 않은 데이터의 경우 비교하는 두 바운딩 박스 중 첫번째 박스의 우상단, 우하단과 두번째 박스의 좌상단, 좌하단의 y값을 비교하여 특정값(threshold)이하인 경우 같은 Line이라고 판단하였습니다. 그러나 이러한 방법은 기울어진 이미지의 OCR 결과에선 Line을 판별하지 못합니다.  
 따라서, 비교하려는 두개의 바운딩 박스에서 첫번째 박스의 좌우상단 좌표를 지나는 선과 두번째 박스의 좌상,하단 좌표를 지나는 선의 교차점을 찾아 교차점과 두번째 박스의 좌상단 좌표와의 거리를 구하고, 마찬가지로 첫번째 박스의 좌우하단의 좌표를 지나는 선과 두번째 박스의 좌상,하단 좌표를 지나는 선의 교차점과 두번째 박스의 좌하단 좌표와의 거리를 먼저 구합니다. 구한 상단의 차이와 하단의 차이 모두 특정값(threshold)이하일 경우 같은 Line으로 판별하도록 하였습니다.  
 이때 두 좌표를 지나는 선을 구하기 위하여 두 좌표를 지나는 일차함수를 구하였고, 두개의 일차함수의 교차점을 구하였습니다. 그 다음 교차점과 좌표간의 거리를 구할 때는 유클리드 거리 공식을 사용하였습니다.
 
2. 바운딩 박스 좌표 정렬
 모든 데이터의 좌표를 확인한 결과 좌표의 순서가 일정하지 않은 것을 확인하였고, 이것을 일정하게 만들기 위하여 좌상단 좌표를 첫번째 좌표로 하고 다른 좌표를 시계 방향 순서로 정렬하였습니다.

3. 입력 데이터의 순서
 입력되는 바운딩 박스의 순서가 무조건 상단부터 들어오지 않는다는 점을 발견하고 처음엔 바운딩 박스의 좌상단 y좌표를 오름차순으로 정렬하여 데이터의 line을 판별하였습니다. 하지만 이러한 방법은 원하는 결과를 도출하지 못하였습니다.  
 따라서 각 line을 요소로 가지는 lines라는 리스트를 만들었고, 주어진 데이터가 입력될 때 lines 리스트에 존재하는 모든 line의 첫번째 바운딩 박스와 compare_box 함수를 통하여 line을 판별하였고, 만약 같은 line이 있다면 해당 line에 데이터를 append하고 일치하는 line이 없는 경우 새로운 line을 만들어 lines 리스트에 append하였습니다.  
 모든 데이터가 lines 리스트에 저장되면, 각 line에 들어있는 바운딩 박스를 각 박스의 좌상단 x좌표를 가지고 오름차순 정렬을 우선 하였습니다. 그다음 line의 위치를 정렬하기 위하여 각 line의 첫번째 박스 좌상단 y좌표를 오름차순으로 정렬하여 lines 리스트를 정렬하였습니다.  

4. 데이터 입출력 방법
 데이터를 입력하거나 출력하는 경우에 파일 입출력을 사용하였습니다. read_data함수는 `[data, [x1, y1], [x2, y2], [x3, y3], [x4, y4]]` 형태로 입력된 데이터를 저장하여 반환하였고 write_data 함수는 정렬된 lines 리스트를 출력 포맷에 맞춰 문자열과 새로운 바운딩 박스 좌표를 파일에 출력하였습니다.
